<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8">
      <title>Tutorial: Hello Dojo!</title>
  </head>
  <link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css" media="screen">
  <link rel="stylesheet" href="../../_common/demo.css" media="screen" type="text/css">

  <body class="claro">
      <h1 id="greeting">Hello</h1>

      <script>
    // Instead of using data-dojo-config, we're creating a dojoConfig
    // object *before* we load dojo.js; they're functionally identical,
    // it's just easier to read this approach with a larger configuration.
      var dojoConfig = {
          async: true,
          // This code registers the correct location of the "demo"
          // package so we can load Dojo from the CDN whilst still
          // being able to load local modules
          dojoBlankHtmlUrl: location.pathname.replace(/\/[^/]+$/, '') + '/blank.html',

          packages: [{
              name: "custom",
              location: location.pathname.replace(/\/[^/]*$/, '') + '/js/custom'
          }]
      };
    </script>
      <!-- load Dojo -->
      <script src="//ajax.googleapis.com/ajax/libs/dojo/1.10.4/dojo/dojo.js"/>


            <!-- set Dojo configuration, load Dojo -->
            <script>
                dojoConfig= {
                    has: {
                        "dojo-firebug": true
                    },
                    parseOnLoad: false,
                    foo: "bar",
                    async: true
                };
            </script>

              <!-- <script>
                  require([
                      'demo/myModule',
                      'dojo/domReady!'
                  ], function (myModule) {
                      myModule.setText('greeting', 'Hello Dojo!');

                      var myLocalFunc = function () {
                          myModule.restoreText('greeting');
                      };

                      setTimeout(myLocalFunc, 3000);
                  });
              </script> -->


              <script>
                  require([
                      'dojo/dom',
                      'dojo/fx',
                      'dojo/domReady!'
                  ], function (dom,fx) {
                      var greeting = dom.byId('greeting');
                      greeting.innerHTML += ' from Dojo!';

                      fx.slideTo({
                        node: greeting,
                        top: 100,
                        left: 200
                      }).play();
                  });
              </script>

              <script>
          			// load our custom/Hello module and wait for the DOM to be ready
                // console.log("suis-je ici ? ");
                // var w;
          			// require([ "custom/Hello", "dojo/domReady!" ], function(Hello){
          			// 	// create our custom dialog
                //   console.log("suis-je ici ? ");
                //
          			// 	this.w = new Hello({
          			// 		id: "hello",
          			// 		content: "Hello World!",
                //     style: "width: 300px"
                //
          			// 	// place it in the DOM
          			// 	}).placeAt(document.body);
                //   console.log("suis-je ici ? ");
                //
          			// 	// show it
          			// 	this.w.show();
          			// });


                // indicate we want custom.Hello to be loaded
                dojo.require("custom.Hello");
                // wait for everything to load
                dojo.ready(function(){
                // now we have everything loaded and we are ready to go
                // let's instantiate a Hello World Dialog from our class:
                customWidget = new custom.Hello({
                content: "Hello World!"
                }, "hello"); // make sure you have an element with the id of "hello"
                // and show it
                customWidget.show();

          		</script>


              <script>
               // Require the registry, parser, Dialog, and wait for domReady
               require(["dijit/registry", "dojo/parser", "dojo/json", "dojo/_base/config", "dijit/Dialog", "dojo/domReady!"]
               , function(registry, parser, JSON, config) {
                   // Explicitly parse the page
                   parser.parse();
                   // Find the dialog
                   var dialog = registry.byId("dialog");
                   // Set the content equal to what dojo.config is
                   dialog.set("content", "<pre>" + JSON.stringify(config, null, "\t") + "```");
                   // Show the dialog
                   dialog.show();
               });
               </script>

               <!-- and later in the page -->
               <div id="dialog" data-dojo-type="dijit/Dialog" data-dojo-props="title: 'dojoConfig / dojo/_base/config'"></div>
               <div id="hello"></div>
  </body>
</html>
